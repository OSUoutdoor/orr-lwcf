<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Land Water and Conservation Fund</title>

  <!-- CSS -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/L.Control.Sidebar.css" />
  <link rel="stylesheet" href="css/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&family=Cinzel:wght@500&family=Commissioner:wght@300&family=Josefin+Sans:wght@500&family=Raleway:wght@300&display=swap" rel="stylesheet">

  <!-- JavaScript -->
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="js/L.Control.Sidebar.js"></script>
  <script src="js/d3.js"></script>
  <script src="js/c3.min.js"></script>
  <script src="js/chroma.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
  <script src="js/leaflet.featuregroup.subgroup.js"></script>
  <script src="https://www.w3schools.com/lib/w3.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light" id="mainNav">
    <p><a href="https://recreationroundtable.org/" target="_blank">
        <img src="img/ORR.png" width="15%"></a>
      <a href="https://orei.oregonstate.edu/" target="_blank">
        <img src="img/osu.png" width="15%"></a>
</p>
    <div class="container">
      <a class="navbar-brand" href="index.html"></a>
      <button class="navbar-toggler navbar-toggler-Left" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#project">Project</a></li>
                    <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#pdf">PDF</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#mapdata">Map</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#dataanalysis">Data</a></li>
          <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="index.html#about">About</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <section id="project" class="project-section">
      <div class="center">
        <h1> Outdoor Recreation and the Land and Water Conservation Fund</h1>
        <br>
        <h3> High-Impact Projects Across the United States for FY22-FY25 </h3>
         <br>
      </div>
      <div class="container-fluid">
      <h5>The Outdoor Recreation Roundtable (ORR), with support from partners at Oregon State University's Outdoor Recreation Economy Initiative, is building a comprehensive list of Land and Water Conservation Fund-eligible recreation projects for funding through the Great
 American Outdoors Act. </h5>
 <br>
 <p>&emsp;&emsp;&emsp;<strong>The passage of the Great American Outdoors Act </strong> guarantees $900 million in mandatory
annual funding for the Land and Water Conservation Fund (LWCF), the most important
tool for funding outdoor recreation in the United States. To help put these funds to work,
the Outdoor Recreation Roundtable put out a call for LWCF-eligible recreation projects
for FY22.
<br><br>&emsp;&emsp;&emsp;From a list of 191 responses from outdoor recreation partners from around the
country--including land management agencies, state departments of natural resources,
outdoor businesses and community members—<b> <strong>this is our Top 11 </strong></b> ORR hopes that these
projects will engage more people in outdoor recreation, help create recreation economies,
and grow the outdoor recreation industry for years to come.</p>
      </br>
    </div>
      </section>
  <section id="pdf" class="pdf-section">
      <div class="center">
        <h2>  Top 11 Projects for Financial Year 2022 </h2>
        <!-- <button type="button">
        <a href="assets/LWCF_ORR.pdf" target="_blank" >
          Click Me for Top 11 PDF
        </a>
        </button> -->
        <p>Open the PDF in Seperate <a href="assets/LWCF_ORR.pdf" target="_blank">Window</a>.</p>

        <br><br>
        <iframe src="assets/LWCF_ORR.pdf" width="100%" height="700px"></iframe>


          <br>  <br>
      </div>
            <center>

      </center>

    </section>

    <section id="mapdata" class="mapdata-section">
      <div class="center">
        <h1> Map for Land & Water Conservation Survey</h1>
      </div>
      <br>
      <div id="sidebar">
        <h2 id='pro'> </h2>
        <h5 id='org'> </h5>
        <h6 id='fy22'> </h6>
        <p id='description'> </p>
        <p id='cos'> </p>
        <p id='type'> </p>
        <p id='rec'> </p>
      </div>
      <div id="map"></div>
    </section>


    <section id="dataanalysis" class="dataanalysis-section">
      <div class="center">
        <h1>Data</h1>

        <!-- <form>
          <input type="radio" name="states" value="set1">
          <label>
            FY 2022
          </label>
          &emsp;&emsp;&emsp;&emsp;
          <input type="radio" name="states" value="set3">
          <label>
            FY 23 and Beyond
          </label>
          &emsp;&emsp;&emsp;&emsp;
          <input type="radio" name="states" value="set2">
          <label>
            All Data
          </label>
        </form> -->



        <br>
        <button type="button">
        <a href="assets/LWCF_Survey_Results.xlsx" download >
          Click Me for EXCEL File
          <br> of Survey Data
        </a>
        </button>
      </div>
      <br>
        <!-- <iframe width="100%" height="600" frameborder="0" scrolling="no" src="https://onedrive.live.com/embed?resid=3B5AFC2E54E9BF15%21108&authkey=%21AGBRhxPUVn4IeYE&em=2&ActiveCell='LWCF%20Eligible'!A1&wdHideGridlines=True&wdHideHeaders=True&wdDownloadButton=True&wdInConfigurator=True"></iframe> -->
        <iframe width="100%" height="600" frameborder="0" scrolling="no" src="https://onedrive.live.com/embed?resid=3B5AFC2E54E9BF15%21108&authkey=%21AGBRhxPUVn4IeYE&em=2&AllowTyping=True&ActiveCell='LWCF%20Eligible'!A1&wdHideGridlines=True&wdHideHeaders=True&wdDownloadButton=True&wdInConfigurator=True"></iframe>
        <br>
        <br>
       <!-- <h1> State by State </h1>

      <table1>
  </table1> -->
    </section>

      <!-- <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>
      <div class="row">
        <div class="col-md">
          <div id="barchart"></div>
        </div>
        <div class="col-lg">
          <div class="center">
            <h3>Management System</h3>
          </div>
          <p>Projects may affect multiple agency/management systems.
            <br><br> This graph visualizes respondents most commonly mentioned management system projects fall under.
            <br><br> Respondents were allowed to check multiple agencies to provide complete scope of project. <p>

        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>

      <div class="row">
        <div class="col-lg">
          <div class="center">
            <h3>Estimated Cost Range </h3>
            <br><br>
          </div>
          <p>Estimated cost ranges consider total cost.
            <br><br> Both secured private matched funds and public funding is included in these estimations. <br><br>  This can be interpreted as the precent of overall respondents.   <p>

        </div>
        <div class="col-md">
          <div id="cost-chart"></div>
        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>

      <div class="row">
        <div class="col-md">
          <div id="matchchart"></div>
        </div>
        <div class="col-lg">
          <div class="center">
            <h3>The percentage of projects with a secured private match.</h3>
            <br><br>
          </div>
          <p>The previous Estimated Cost graphic includes both public funds and privately matched funds.
            <br><br> Hover over pie sectors to explores the percent of overall respondents who have secured privately match funds.<p>

        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>

      <div class="row">
        <div class="col-lg">
          <div class="center">
            <h3>Application Standing</h3>
            <br><br>
          </div>
          <p>This pie chart explores whether respondents consider their projects a new concept or those in the application process.
            <br><br> Hover over pie sectors to explores the percentage breakdown of what stage the projects are in.  </p>

        </div>
        <div class="col-md">
          <div id="conceptchart"></div>
        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>


      <div class="row">
        <div class="col-md">
          <div id="chart"></div>
        </div>
        <div class="col-lg">
          <div class="center">
            <h3>Project Type </h3>
              <br><br>
          </div>
          <p>What type of project is it? <p>
              <p>Projects can be considered a development, an acquisition, a combination of these two types or a project in its planning stage.
              <br><br> Hover over the pie sectors to explores what type of projects are being planned. </p>

        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>

      <div class="row">
        <div class="col-lg">
          <div class="center">
            <h3>Categorization of the project</h3>
              <br><br>
          </div>
          <p>These projects cover a variety of recreational categorizes. <p>
              <p>Hover over the pie sectors to see which recreational categories where reported by our respondents.</p>

        </div>
        <div class="col-md">
          <div id="catchart"></div>
        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>

      <div class="row">
        <div class="col-md">
          <div id="recchart"></div>
        </div>
        <div class="col-lg">
          <div class="center">
            <h3>Recreation Types Supported</h3>
              <br><br>
          </div>
          <p>The list highlights the most frequently mentioned type of recreation the projects overall support.</p>
          <p>Each respondent was allowed to check multiple recreation types.
          <br> <br> Listed from most to list commonly mentioned</p>
        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>



      <div class="row">
        <div class="col-lg">
          <div class="center">
            <h3>Demographics </h3>
              <br><br>
          </div>
          <p>The list highlights the most frequently mentioned demographic the projects support.</p>
          <p>Each respondent was allowed to check as many potential demographic blocks the project was likely to serve.
            <br> <br> Listed from most to list commonly mentioned</p>
        </div>
        <div class="col-md">
          <div id="demochart"></div>
        </div>
      </div>
      <br>
      <hr size="6" width="50%" align="center" color="Black">
      <br>
    </section> -->



    <section id="about" class="about-section">
      <div class="center">
        <h1> About Us </h1>
      </div>



    <a href="https://recreationroundtable.org/" target="_blank"><h3><img src="img/ORR1.png" width="8%">&emsp;Outdoor Recreation Roundtable  </h3></a>
      <p>The Outdoor Recreation Roundtable (ORR) is America’s leading coalition of outdoor recreation trade associations and organizations working to promote the growth of the outdoor recreation economy and outdoor recreation activities.</p>
      <a style="color:#D73F09"  href="https://orei.oregonstate.edu/" target="_blank" color="#fd7e14">
                <h3> <img src="img/osu1.png" width="4%">&emsp;Outdoor Recreation Economy Initiative</h3></a>
      <p>The Outdoor Recreation Economy Initiative (OREI) is delivering a new kind of workforce development to meet the unique needs of the vast, extremely entrepreneurial, and rapidly growing outdoor recreation industry.</p>

    </section>
  </div>
  <div class="copyright py-4 text-center text-white">
    <div class="container">
      <p> In partnership with <img src="img/osu.png" width="150">
    </div>
  </div>
  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
  <div class="scroll-to-top d-lg-none position-fixed">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
  </div>

  <script>

    var colors = chroma.scale('Set2').mode('lch').colors(9);
    // Map
    var map = L.map("map", {
      minZoom: 4,
      maxZoom: 8,
      scrollWheelZoom: false

    }).setView([38, -98.], 4);


    L.tileLayer('https://api.mapbox.com/styles/v1/loweas/ck6rbqwaj20fi1inwqn4c4w99/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibG93ZWFzIiwiYSI6ImNqczlhMzJqMjE1dDM0NG12dHBxam1lZjIifQ.Ox8goYypCr_cJCoDPgHTsQ', {
      attribution: 'Made By <a href="https://github.com/loweas">loweas</a>',
    }).addTo(map);



    var tests = null;
    // Get GeoJSON and put on it on the map when it loads



    var masClusGroup = new L.markerClusterGroup({  disableClusteringAtZoom: 9,maxClusterRadius:40}).addTo(map);

    // var all = L.markerClusterGroup().addTo(map);
    //
    // var fy = L.featureGroup.subGroup(all).addTo(map);
    // development = L.featureGroup.subGroup(all).addTo(map);
    // plan = L.featureGroup.subGroup(all).addTo(map);
    // combo = L.featureGroup.subGroup(all).addTo(map);
    // aqu = L.featureGroup.subGroup(all).addTo(map);
    //


    var all = L.featureGroup.subGroup(masClusGroup).addTo(map);
    fy = L.featureGroup.subGroup(masClusGroup);
    development = L.featureGroup.subGroup(masClusGroup);
    plan = L.featureGroup.subGroup(masClusGroup);
    combo = L.featureGroup.subGroup(masClusGroup);
    aqu = L.featureGroup.subGroup(masClusGroup);
    fy23 = L.featureGroup.subGroup(masClusGroup);
    best = L.featureGroup.subGroup(masClusGroup);






    var url1 = "assets/lwcf/lwcf.geojson";


    $.getJSON(url1, function(data) {
                 geojsonlayer= L.geoJson(data, {
                       filter: function(feature, layer) {
                           return feature.properties.FY =="FY23 and Beyond";
                       }
                 }).addTo(fy23);
              });
              $.getJSON(url1, function(data) {
                           geojsonlayer= L.geoJson(data, {
                                 filter: function(feature, layer) {
                                     return feature.properties.best =="Yes";
                                 }
                           }).addTo(best);
                        });

    $.getJSON(url1, function(data) {
            geojsonlayer= L.geoJson(data, {
            }).addTo(all);
         });

    $.getJSON(url1, function(data) {
                 geojsonlayer= L.geoJson(data, {
                       filter: function(feature, layer) {
                           return feature.properties.FY =="FY22";
                       }
                 }).addTo(fy);
              });



  var overlayMaps  = {

};

var baselayer = {
  "All": all,
  "Top 11": best,
  "FY 2022": fy,
  "FY 2023 & Beyond": fy23,
};


var lcontrol =  L.control.layers(baselayer,overlayMaps,{collapsed:false,position: 'bottomleft'}).addTo(map);


    var sidebar = L.control.sidebar('sidebar', {
      closeButton: true,
      position: 'right'
    });

    map.addControl(sidebar);

// This is for all points
    all.on('click', function(e) {
      sidebar.toggle();

      var pro = document.getElementById('pro');
      pro.innerHTML = e.layer.feature.properties.Project;

      var fy22 = document.getElementById('fy22');
      if (e.layer.feature.properties.FY == "FY22") {
        fy22.innerHTML = "Financal Year 2022"
      } else if (e.layer.feature.properties.FY == "FY23 and Beyond") {
        fy22.innerHTML = "Financal Year 2023 & Beyond"
      } else(fy22.innerHTML = "")

      var name = document.getElementById('org');
      if (e.layer.feature.properties.Organization_Name == "NA") {
        name.innerHTML = e.layer.feature.properties.ORR;
      } else(name.innerHTML = e.layer.feature.properties.Organization_Name)

      var des = document.getElementById('description');
      des.innerHTML = "Project Description : <br> " + e.layer.feature.properties.Description;

      var cos = document.getElementById('cos');
      if (e.layer.feature.properties.Estimate_Cost == null) {
        cos.innerHTML = "Estimated Cost : " + e.layer.feature.properties.Cost_Range;
      } else(cos.innerHTML = "Estimated Cost : $" + e.layer.feature.properties.Estimate_Cost)

      var type = document.getElementById('type');
      type.innerHTML = "Project Type : " + e.layer.feature.properties.type_rec;

      var rec = document.getElementById('rec');
      if (e.layer.feature.properties.Q15_14_TEXT == null) {
        rec.innerHTML = "LWCF Program : " + e.layer.feature.properties.program;
      } else(rec.innerHTML = "Targeted Recreation : " + e.layer.feature.properties.Q15 + "" + e.layer.feature.properties.Q15_14_TEXT)
    });
    //finacial year 2023
    fy23.on('click', function(e) {
      sidebar.toggle();

      var pro = document.getElementById('pro');
      pro.innerHTML = e.layer.feature.properties.Project;

      var fy22 = document.getElementById('fy22');
      if (e.layer.feature.properties.FY == "FY22") {
        fy22.innerHTML = "Financal Year 2022"
      } else if (e.layer.feature.properties.FY == "FY23 and Beyond") {
        fy22.innerHTML = "Financal Year 2023 & Beyond"
      } else(fy22.innerHTML = "")

      var name = document.getElementById('org');
      if (e.layer.feature.properties.Organization_Name == "NA") {
        name.innerHTML = e.layer.feature.properties.ORR;
      } else(name.innerHTML = e.layer.feature.properties.Organization_Name)

      var des = document.getElementById('description');
      des.innerHTML = "Project Description : <br> " + e.layer.feature.properties.Description;

      var cos = document.getElementById('cos');
      if (e.layer.feature.properties.Estimate_Cost == null) {
        cos.innerHTML = "Estimated Cost : " + e.layer.feature.properties.Cost_Range;
      } else(cos.innerHTML = "Estimated Cost : $" + e.layer.feature.properties.Estimate_Cost)

      var type = document.getElementById('type');
      type.innerHTML = "Project Type : " + e.layer.feature.properties.type_rec;

      var rec = document.getElementById('rec');
      if (e.layer.feature.properties.Q15_14_TEXT == null) {
        rec.innerHTML = "LWCF Program : " + e.layer.feature.properties.program;
      } else(rec.innerHTML = "Targeted Recreation : " + e.layer.feature.properties.Q15 + "" + e.layer.feature.properties.Q15_14_TEXT)
    });
    // Top 11
    best.on('click', function(e) {
      sidebar.toggle();

      var pro = document.getElementById('pro');
      pro.innerHTML = e.layer.feature.properties.Project;

      var fy22 = document.getElementById('fy22');
      if (e.layer.feature.properties.FY == "FY22") {
        fy22.innerHTML = "Financal Year 2022"
      } else if (e.layer.feature.properties.FY == "FY23 and Beyond") {
        fy22.innerHTML = "Financal Year 2023 & Beyond"
      } else(fy22.innerHTML = "")

      var name = document.getElementById('org');
      if (e.layer.feature.properties.Organization_Name == "NA") {
        name.innerHTML = e.layer.feature.properties.ORR;
      } else(name.innerHTML = e.layer.feature.properties.Organization_Name)

      var des = document.getElementById('description');
      des.innerHTML = "Project Description : <br> " + e.layer.feature.properties.Description;

      var cos = document.getElementById('cos');
      if (e.layer.feature.properties.Estimate_Cost == null) {
        cos.innerHTML = "Estimated Cost : " + e.layer.feature.properties.Cost_Range;
      } else(cos.innerHTML = "Estimated Cost : $" + e.layer.feature.properties.Estimate_Cost)

      var type = document.getElementById('type');
      type.innerHTML = "Project Type : " + e.layer.feature.properties.type_rec;

      var rec = document.getElementById('rec');
      if (e.layer.feature.properties.Q15_14_TEXT == null) {
        rec.innerHTML = "LWCF Program : " + e.layer.feature.properties.program;
      } else(rec.innerHTML = "Targeted Recreation : " + e.layer.feature.properties.Q15 + "" + e.layer.feature.properties.Q15_14_TEXT)
    });

// This is for FY 2022
    fy.on('click', function(e) {
      sidebar.toggle();

      var pro = document.getElementById('pro');
      pro.innerHTML = e.layer.feature.properties.Project;

      var fy22 = document.getElementById('fy22');
      if (e.layer.feature.properties.FY == "FY22") {
        fy22.innerHTML = "Financal Year 2022"
      } else if (e.layer.feature.properties.FY == "FY23 and Beyond") {
        fy22.innerHTML = "Financal Year 2023 & Beyond"
      } else(fy22.innerHTML = "")

      var name = document.getElementById('org');
      if (e.layer.feature.properties.Organization_Name == "NA") {
        name.innerHTML = e.layer.feature.properties.ORR;
      } else(name.innerHTML = e.layer.feature.properties.Organization_Name)

      var des = document.getElementById('description');
      des.innerHTML = "Project Description : <br> " + e.layer.feature.properties.Description;

      var cos = document.getElementById('cos');
      if (e.layer.feature.properties.Estimate_Cost == null) {
        cos.innerHTML = "Estimated Cost : " + e.layer.feature.properties.Cost_Range;
      } else(cos.innerHTML = "Estimated Cost : $" + e.layer.feature.properties.Estimate_Cost)

      var type = document.getElementById('type');
      type.innerHTML = "Project Type : " + e.layer.feature.properties.type_rec;

      var rec = document.getElementById('rec');
      if (e.layer.feature.properties.Q15_14_TEXT == null) {
        rec.innerHTML = "LWCF Program : " + e.layer.feature.properties.program;
      } else(rec.innerHTML = "Targeted Recreation : " + e.layer.feature.properties.Q15 + "" + e.layer.feature.properties.Q15_14_TEXT)
    });



    map.once('focus', function() {
      map.scrollWheelZoom.enable();
    });


//     // Data Analysis Part of the Website using D3 and C3
//
//     // Color for graphs
//     var color4 = chroma.scale(['#5c8e53', '#2a4c7e']).mode('lch').colors(4);
//     var color5 = chroma.scale(['#5c8e53', '#2a4c7e']).mode('lch').colors(5);
//     var color8 = chroma.scale(['#5c8e53', '#2a4c7e', '#8E535C', '#535353']).mode('lch').colors(9);
//     var color7 = chroma.scale(['#5c8e53', '#2a4c7e', '#8E535C']).mode('lch').colors(7);
//     var color14 = chroma.scale(['#5c8e53', '#2a4c7e', '#8E535C', '#535353']).mode('lch').colors(14);
//     var color20 = chroma.scale(['#5c8e53', '#2a4c7e', '#8E535C', '#535353']).mode('lch').colors(20);
//
//
    //  Initial loadup
    Promise.all([
      d3.csv('assets/map.csv', d3.autoType),
    ]).then(function(datasets) {
//
//
//
//       var matrix = d3.nest()
//         .key(function(d) {return d.State;  })
//         .key(function(d) {return d.Q5_1;  })
//         .key(function(d) {return d.Q5_2;  })
//         .entries(datasets[0]);
//         var j;
//         var k;
//
//

// Makes State By State Table with Project Overview

      var matrix = d3.nest()
        .key(function(d) {return d.State;  }) .sortKeys(d3.ascending)
        .key(function(d) {return d.Project;  }) .sortKeys(d3.ascending)
        // .key(function(d) {return d.Q5_2;  })
        .entries(datasets[0]);

        var j;
        var k;

        // Select the table element

       var table1 =   d3.select("table1").selectAll("ul")
            .data(matrix)
          .enter().append("ul")
          .style("font-size", "24px")
            .text(function(d) { return d.key +" - "+ d.values.length })
            .selectAll("li")
              .data(function(d) { return d.values })
            .enter().append("li")
              .text(function(d) {
                    return d.key  })
                        .style("font-size", "16px")
              table1.selectAll('ul').select('li').classed('row-header', true);


//
// // Subdata sets fy 2022 and all
//       var df1 = datasets[0];
//       var df2 = datasets[0].filter(function(d) {
//       return d.Q35 == "FY 22";
//       })
//       var df3 = datasets[0].filter(function(d) {
//         return d.Q35 == "FY 23 and Beyond";
//       })
//
//       const dfs = [df1,
//         df2,
//         df3
//       ];
//
//       // Radio Caller button
//       const buttons = d3.selectAll('input');
//       buttons.on('change', function(d) {
//         const selection = this.value;
//         landwater(selection, dfs)
//       });
//
//       // load the page on all data
//       $(document).ready(function() {
//         $("input:radio[value=set2]").click();
//       });
//
//
//       function landwater(selection, dfs) {
//         let df;
//         if (selection == 'set1') {
//           df = dfs[1];
//         } else if (selection == 'set2') {
//           df = dfs[0];
//         }
//         else if (selection == 'set3') {
//           df = dfs[2];
//         }
//
//
//         // Estimated Cost Range
//         var estcost = d3.nest()
//           .key(function(d) {
//             return d.Q13;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(df);
//
//
//
//         estcost.forEach(function(e) {
//           if (e.key == "$1,750,000+") {
//             e["ranges"] = 8
//           }
//           if (e.key == "$1,500,000 - $1,750,000") {
//             e["ranges"] = 7
//           }
//           if (e.key == "$1,250,001 - $1,500,000") {
//             e["ranges"] = 6
//           }
//           if (e.key == "$1,000,001 - $1,250,000") {
//             e["ranges"] = 5
//           }
//           if (e.key == "$750,0001 - $1,000,000") {
//             e["ranges"] = 4
//           }
//           if (e.key == "$500,001 - $750,000") {
//             e["ranges"] = 3
//           }
//           if (e.key == "$250,001 - $500,000") {
//             e["ranges"] = 2
//           }
//           if (e.key == "$0 - $250,000") {
//             e["ranges"] = 1
//           }
//           if (e.key == "Unknown") {
//             e["ranges"] = 0
//           }
//         });
//         estcost.sort(function(a, b) {
//           return d3.descending(a.ranges, b.ranges);
//         });
//         var i;
//         for (i = 0; i < estcost.length; i++) {
//           estcost[i].Respondents = estcost[i]['value'] / df.length;
//         }
//
//         // var estcost1 = d3.nest()
//         //   .key(function(d) { return d.Q13;})
//         //   .key(function(d) { return d.Q21; })
//         //   .rollup(function(v) { return v.length; })
//         //   .entries(df);
//         //   estcost1.forEach(function(e) {
//         //     if (e.key == "$1,750,000+") {
//         //       e["ranges"] = 8
//         //     }
//         //     if (e.key == "$1,500,000 - $1,750,000") {
//         //       e["ranges"] = 7
//         //     }
//         //     if (e.key == "$1,250,001 - $1,500,000") {
//         //       e["ranges"] = 6
//         //     }
//         //     if (e.key == "$1,000,001 - $1,250,000") {
//         //       e["ranges"] = 5
//         //     }
//         //     if (e.key == "$750,0001 - $1,000,000") {
//         //       e["ranges"] = 4
//         //     }
//         //     if (e.key == "$500,001 - $750,000") {
//         //       e["ranges"] = 3
//         //     }
//         //     if (e.key == "$250,001 - $500,000") {
//         //       e["ranges"] = 2
//         //     }
//         //     if (e.key == "$0 - $250,000") {
//         //       e["ranges"] = 1
//         //     }
//         //     if (e.key == "Unknown") {
//         //       e["ranges"] = 0
//         //     }
//         //   });
//         //   estcost1.sort(function(a, b) {
//         //     return d3.descending(a.ranges, b.ranges);
//         //   });
//         //               console.log(estcost1)
//         //   var i;
//         //   for (i = 0; i < estcost.length; i++) {
//         //     estcost[i].yesmatch = estcost1[i].values[1].value/estcost[i]['value'];
//         //   }
//
//
//
//         // 7. Project Type
//         var protypeCount = d3.nest()
//           .key(function(d) {
//             return d.Q31;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(df);
//
//         var protypedata = {};
//         var sites = [];
//         protypeCount.forEach(function(e) {
//           sites.push(e.key);
//           protypedata[e.key] = e.value;
//         })
//         // 16. Project matched funds
//         var matchCount = d3.nest()
//           .key(function(d) {
//             return d.Q21;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(df);
//
//         var matchdata = {};
//         var matchsites = [];
//         matchCount.forEach(function(e) {
//           matchsites.push(e.key);
//           matchdata[e.key] = e.value;
//         })
//
//         // 8. How would you best categorize the project?
//         var procatCount = d3.nest()
//           .key(function(d) {
//             return d.Q10;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(df);
//
//         var procatdata = {};
//         var sitescat = [];
//         procatCount.forEach(function(e) {
//           sitescat.push(e.key);
//           procatdata[e.key] = e.value;
//         })
//         // New concept ideas
//         var concept = d3.nest()
//           .key(function(d) {
//             return d.Q22;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(df);
//
//         var conceptdata = {};
//         var conceptsites = [];
//         concept.forEach(function(e) {
//           conceptsites.push(e.key);
//           conceptdata[e.key] = e.value;
//         })
//
//
//         //9. Multi question land
//         var q9 = df.map(function(d) {
//           return {
//             q9: d.Q9,
//           }
//         });
//
//
//         result = [].concat(
//           ...q9.map(
//             ({
//               q9
//             }) => q9.split(',').map(
//               land => ({
//                 land
//               })
//             )
//           )
//         );
//
//
//         var lwcfp = d3.nest()
//           .key(function(d) {
//             return d.land;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(result)
//           .sort(function(a, b) {
//             return d3.descending(a.value, b.value);
//           });
//         var lands1 = [];
//         var i;
//         for (i = 0; i < lwcfp.length; i++) {
//           lwcfp[i].Respondents = lwcfp[i]['value'] / df.length;
//
//         }
//         lwcfp.forEach(function(e) {
//           lands1.push(e.key);
//         })
//
//
//         // Estimated cost
//         var q20 = df.map(function(d) {
//           return {
//             q20: d.Q20,
//           }
//         });
//         results = [].concat(
//           ...q20.map(
//             ({
//               q20
//             }) => q20.split(',').map(
//               rectype => ({
//                 rectype
//               })
//             )
//           )
//         );
//         var demo = d3.nest()
//           .key(function(d) {
//             return d.rectype;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(results)
//           .sort(function(a, b) {
//             return d3.descending(a.value, b.value);
//           });
//         var demo1 = [];
//         var i;
//         for (i = 0; i < demo.length; i++) {
//           demo[i].Respondents = demo[i]['value'] / df.length;
//         }
//         demo.forEach(function(e) {
//           demo1.push(e.key);
//         })
//
//         // Estimated Rec type
//
//         var q15 = df.map(function(d) {
//
//           return {
//             q15: d.Q15,
//           }
//
//         });
//
//
//         resultrec = [].concat(
//           ...q15.map(
//             ({
//               q15
//             }) => q15.split(',').map(
//               rectype => ({
//                 rectype
//               })
//             )
//           )
//         );
//         var rec = d3.nest()
//           .key(function(d) {
//             return d.rectype;
//           })
//           .rollup(function(v) {
//             return v.length;
//           })
//           .entries(resultrec)
//           .sort(function(a, b) {
//             return d3.descending(a.value, b.value);
//           });
//         var rec1 = [];
//         var i;
//         for (i = 0; i < rec.length; i++) {
//           rec[i].Respondents = rec[i]['value'] / df.length;
//         }
//         rec.forEach(function(e) {
//           rec1.push(e.key);
//         })
//
//
//
//
//
//         var chart = c3.generate({
//
//           data: {
//             json: estcost,
//             keys: {
//               x: 'key',
//               value: ['Respondents'],
//             },
//             type: 'bar',
//             color: function(color, d) {
//               return color8[d.index];
//             },
//             labels: {
//               format: function(v, id, i, j) {
//                 var formatPercent = d3.format(",.0%");
//                 return formatPercent(v);
//               }
//             },
//           },
//           axis: {
//             x: {
//               label: {
//                 text: 'Estimated Cost Range',
//                 position: 'outer-center',
//               },
//               type: 'category',
//               // categories:  [ "$1,750,000+","$1,500,000 - $1,750,000","$1,250,001 - $1,500,000",'$1,000,001-$1,250,000',"$750,0001 - $1,000,000","$500,001 - $750,000","$250,001 - $500,000","$0 - $250,000",'Unknown'],
//               tick: {
//                 centered: true
//               }
//             },
//             y: {
//               tick: {
//                 format: d3.format('.0%')
//               },
//               label: {
//                 text: '% of total Respondents (n=' + df.length + ")",
//                 position: 'outer-middle'
//               },
//               max: .4,
//               min: 0,
//               padding: {
//                 top: 0,
//                 bottom: 0
//               }
//             },
//             rotated: true
//           },
//           legend: {
//             show: false
//           },
//           bindto: "#cost-chart"
//         });
//
//
//
//         var chart = c3.generate({
//           data: {
//             json: [protypedata],
//             keys: {
//               value: sites,
//             },
//             type: 'pie'
//           },
//           axis: {
//             x: {
//               type: 'category'
//             }
//           },
//           color: {
//             pattern: [color7[0], color7[2], color7[3], color7[4], 'grey']
//           },
//           bindto: "#chart"
//         });
//
//         var conceptchart = c3.generate({
//           data: {
//             json: [conceptdata],
//             keys: {
//               value: conceptsites,
//             },
//             type: 'pie'
//           },
//           axis: {
//             x: {
//               type: 'category'
//             }
//           },
//           color: {
//             pattern: [color7[0], color7[2], color7[3], color7[4], 'grey']
//           },
//           bindto: "#conceptchart"
//         });
//         var matchchart = c3.generate({
//           data: {
//             json: [matchdata],
//             keys: {
//               value: matchsites,
//             },
//             type: 'pie'
//           },
//           axis: {
//             x: {
//               type: 'category'
//             }
//           },
//           color: {
//             pattern: [color7[0], color7[2], color7[3], color7[4], 'grey']
//           },
//           bindto: "#matchchart"
//         });
//
//         var catchart = c3.generate({
//           data: {
//             json: [procatdata],
//             keys: {
//               value: sitescat,
//             },
//             type: 'pie',
//           },
//           axis: {
//             x: {
//               type: 'category'
//             }
//           },
//           color: {
//             pattern: [color20[0], color20[2], color20[4], color20[6], color20[8], color20[10], color20[11],color20[13],color20[17],color20[19]]
//           },
//           legend: {
//             show: false
//           },
//
//           bindto: "#catchart"
//         });
//
//
//         var barchart = c3.generate({
//           data: {
//             json: lwcfp,
//             keys: {
//               x: 'key',
//               value: ['Respondents'],
//             },
//             type: 'bar',
//             color: function(color, d) {
//               return color8[d.index];
//             },
//             labels: {
//               format: function(v, id, i, j) {
//                 var formatPercent = d3.format(",.0%");
//                 return formatPercent(v);
//               }
//             },
//           },
//
//           axis: {
//             x: {
//               label: {
//                 text: '',
//                 position: 'outer-center',
//               },
//               type: 'category',
//               categories: lands1,
//               tick: {
//                 centered: true,
//               }
//             },
//             y: {
//               tick: {
//                 format: d3.format('.0%')
//               },
//               max: 1,
//               min: 0,
//               padding: {
//                 top: 0,
//                 bottom: 0
//               },
//               label: {
//                 text: 'Total Respondents (n=' + df.length + ")",
//                 position: 'outer-middle',
//
//               },
//
//             },
//             rotated: true
//           },
//           legend: {
//             show: false
//           },
//
//           bindto: "#barchart"
//         });
//
//
//
//         var recchart = c3.generate({
//           data: {
//             json: rec,
//             keys: {
//               x: 'key',
//               value: ['Respondents'],
//             },
//             type: 'bar',
//             color: function(color, d) {
//               return color20[d.index];
//             },
//             labels: {
//               format: function(v, id, i, j) {
//                 var formatPercent = d3.format(",.0%");
//                 return formatPercent(v);
//               }
//             },
//           },
//
//           axis: {
//             x: {
//               label: {
//                 text: '',
//                 position: 'outer-center',
//               },
//               type: 'category',
//               categories: lands1,
//               tick: {
//                 centered: true,
//               }
//             },
//             y: {
//               tick: {
//                 format: d3.format('.0%')
//               },
//               max: 1,
//               min: 0,
//               padding: {
//                 top: 0,
//                 bottom: 0
//               },
//               label: {
//                 text: 'Total Respondents (n=' + df.length + ")",
//                 position: 'outer-middle',
//
//               },
//
//             },
//             rotated: true
//           },
//           legend: {
//             show: false
//           },
//
//           bindto: "#recchart"
//         });
//
//         var demchart = c3.generate({
//           data: {
//             json: demo,
//             keys: {
//               x: 'key',
//               value: ['Respondents'],
//             },
//             type: 'bar',
//             color: function(color, d) {
//               return color14[d.index];
//             },
//             labels: {
//               format: function(v, id, i, j) {
//                 var formatPercent = d3.format(",.0%");
//                 return formatPercent(v);
//               }
//             },
//           },
//
//           axis: {
//             x: {
//               label: {
//                 text: 'Demographic',
//                 position: 'outer-center',
//               },
//               padding: {
//                 left: 0,
//                 right: 0,
//               },
//               type: 'category',
//               categories: lands1,
//               tick: {
//                 centered: true,
//               }
//             },
//             y: {
//               tick: {
//                 format: d3.format('.0%'),
//
//               },
//               max: 1,
//               min: 0,
//               padding: {
//                 top: 20,
//                 bottom: 0
//               },
//               label: {
//                 text: 'Total Respondents (n=' + df.length + ")",
//                 position: 'outer-middle',
//
//               },
//
//             },
//             rotated: true
//           },
//           legend: {
//             show: false
//           },
//
//           bindto: "#demochart"
//         });
//
//       }
    });
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-141661518-4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-141661518-4');
  </script>
</body>

</html>
